.. note::
    :class: sphx-glr-download-link-note

    Click :ref:`here <sphx_glr_download_auto_examples_Potjans_2014_example.py>` to download the full example code
.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_Potjans_2014_example.py:


Pynest microcircuit example
---------------------------

Example file to run the microcircuit.


This example uses the function :py:func:`.GetNodes`, which is deprecated. A deprecation
warning is therefore issued. For details about deprecated functions, see
documentation.

Import the necessary modules


.. code-block:: default


    import time
    import numpy as np
    import network
    from network_params import net_dict
    from sim_params import sim_dict
    from stimulus_params import stim_dict


Initialize the network and pass parameters to it.


.. code-block:: default


    tic = time.time()
    net = network.Network(sim_dict, net_dict, stim_dict)
    toc = time.time() - tic
    print("Time to initialize the network: %.2f s" % toc)
    # Connect all nodes.
    tic = time.time()
    net.setup()
    toc = time.time() - tic
    print("Time to create the connections: %.2f s" % toc)
    # Simulate.
    tic = time.time()
    net.simulate()
    toc = time.time() - tic
    print("Time to simulate: %.2f s" % toc)


Plot a raster plot of the spikes of the simulated neurons and the average
spike rate of all populations. For visual purposes only spikes 100 ms
before and 100 ms after the thalamic stimulus time are plotted here by
default. The computation of spike rates discards the first 500 ms of
the simulation to exclude initialization artifacts.


.. code-block:: default


    raster_plot_time_idx = np.array(
        [stim_dict['th_start'] - 100.0, stim_dict['th_start'] + 100.0]
        )
    fire_rate_time_idx = np.array([500.0, sim_dict['t_sim']])
    net.evaluate(raster_plot_time_idx, fire_rate_time_idx)


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_auto_examples_Potjans_2014_example.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download

     :download:`Download Python source code: example.py <example.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: example.ipynb <example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
